Система учета финансов Web-студии, занимающейся разработкой и поддержкой проектов
=================================================================================
 


## Предполагаемый набор функциональных возможностей

1. Система ролей и прав доступа
	- Возможные роли:
		* Менеджер проекта 
		* Бухгалтер
		* Финансовый директор
		* Исполнитель проекта
			+ Программист
			+ Верстальщик
			+ Дизайнер
			+ Тестер
2. Управление проектами
3. Осуществление финансовых операций



### Система ролей и прав доступа

В системе предусмотрено разграничение прав доступа к данным. Предусмотрены следующие роли и возможности для ролей.


#### Менеджер проекта

Действия просмотра:
- Список проектов (желательно наличие фильтров по: названию, контрагенту, менеджеру и статусу проекта)
- Список счетов (желательно наличие фильтров по: проекту, дате)
	- Список счетов по статусам - отклонен, подписан, утвержден

Действия добавления:
- Добавление проекта
- Добавление счета к контрагенту (по проекту(-ам), которыми он управляет)
- Добавление нового исполнителя

Действия редактирования:
- Изменение названия проекта
- Изменение описания проекта
- Передача проекта другому менеджеру (редактирование менеджера проекта) - если есть статус администратора
- Изменение статуса проекта
- Изменение списка исполнителей проекта
- Изменение типа выставленного счета
- Изменение описания выставленного счета
- Изменение суммы выставленного счета
- Изменение данных исполнителей


#### Бухгалтер

Действия просмотра:
- Список счетов (желательно наличие фильтров по: проекту, дате, бухгалтеру и статусам - отклонен, подписан, утвержден)
	- Список созданных менеджерами новых счетов (счета, которые необходимо взять в управление)
	- Список утвержденных финансовым директором счетов (счета, которые контрагентам необходимо оплатить)
- Список проектов (желательно наличие фильтров по: названию, контрагенту, менеджеру и статусу проекта)

Действия добавления:
- Добавление счета к контрагенту (по любому проекту)

Действия редактирования:
- Взятие управление над счетом (привязка выставленного менеджером счета, когда не заполнено поле 'accountant_id', к своей учетной записи) 
- Изменение типа выставленного счета
- Изменение описания выставленного счета
- Изменение суммы выставленного счета
- Изменение статуса счета на "отклонен" (если счет выставлен ошибочно или не верно)
- Изменение статуса счета на "подписан" (если счет выставлен верно и не выставлен статус "отклонен")
- Изменение статуса счета на "оплачен" (когда контрагент оплатил выставленные ему счет)


##### Финансовый директор

Действия просмотра:
- Список счетов (желательно наличие фильтров по: проекту, дате и статусам - отклонен, подписан, утвержден)
	- Список оплаченных и неоплаченных счетов 
- Список проектов (желательно наличие фильтров по: названию, контрагенту, менеджеру и статусу проекта)

Действия добавления:
- [отсутствуют]

Действия редактирования:
- Изменение типа выставленного счета
- Изменение описания выставленного счета
- Изменение суммы выставленного счета
- Изменение статуса счета на "подтвержден" (если у счета бухгалтером выставлен статус "подписан")


### Управление проектами

Действия по управлению проектами выполняет менеджер проекта. 

Он может редактировать только проекты, которыми он управляет. Если у него есть статус "администратор" он может управлять всеми проектами.

Список действий по управлению проектами:

- Назначение исполнителей
- Изменение списка исполнителей проекта 
- Создание новых заявок на оплату (выставление счетов контрагентам)
	- Просмотр статусов выставленных счетов

Права доступа менеджера описаны выше.


### Осуществление финансовых операций

Действия по управлению счетами выполняет бухгалтер. 

Счета создаются менеджерам через заполнение формы создания счета. После создания в них не заполнено свойство 'accountant_id'. Список таких новых счетов должен быть доступен бухгалтеру для просмотра, бухгалтер должен взять счет под управление выбрав его в этом списке.

Он может редактировать те счета, которыми управляет. Так же он может добавить новый счет. 

Бухгалтер проверяет правильность счета и выставляет статус "отклонен" или "подписан". Отклоненные счета отображаться создавшему их менеджеру.

Права доступа бухгалтера описаны выше.


### План-фактный анализ

TODO: нужна консультация бухгалтера


### Сводный отчет по экономической эффективности проектов

TODO: нужна консультация бухгалтера



## Интерфейс приложения


### Визуальное описание

Интерфейс вэб-приложения состоит из 3-х основных частей:

1. Заголовочная часть
	- Выводится логотип (или название фирмы)
	- Выводится имя пользователя и кнопка "выход" - для аутентифицированных пользователям
2. Основная часть 
3. Футер 
	Может содержать ссылки, год и пр. информацию


### Список разделов

+ Главная страница: ~/
	* Форма входа - выводится не аутентифицированным пользователям
	* Переадресация в раздел "Приборная панель" - для аутентифицированных пользователям

+ Раздел "Приборная панель": ~/dashbord
	* [Меню] Ссылки на инструменты, характерные для каждой роли пользователя
	* [Отчет] Краткая статистика, по тем данным, с которыми работает пользователь. Например: 
		+ кол-во новых счетов (для бухгалтера)
		+ кол-во новых отклоненных и подтвержденных счетов (для менеджера)
		+ кол-во счетов на утверждение (для финансового директора)

+ Раздел "Проекты": ~/projects
	* [Меню] Ссылки на возможные действия. Например: 
		- Ссылка на страницу добавления проекта
	* [Отчет] Список проектов:
		- Фильтрация по дате, статусу, проекту, и пр. 
		- Переход на страницу просмотра проекта по клику на названии проекта 
	- Подраздел "Страница добавления проекта": ~/projects/add
		* [Форма] Заполнение полей со свойствами проекта. Например:
			- [Текстовое поле] Название
			- [Выпадающий список] Контрагент-заказчик
		* [Форма] Добавление исполнителей
	- Подраздел "Страница просмотра (и редактирования) проекта": ~/projects/view/N (где N - id проекта)
		* [Форма] Поля свойств проекта. Возможности:
			- Просмотр и редактирование (доступно только для менеджера, управляющего проектом)
			- Просмотр (для бухгалтера и финансового директора)
		* [Форма] Изменение списка исполнителей

+ Раздел "Счета": ~/bills
	* [Меню] Ссылки на возможные действия. Например: 
		- Ссылка на страницу "Список новых счетов, созданных менеджерами"
		- Ссылка на страницу Страница добавления счета"
		- Ссылка на страницу "Страница просмотра (и редактирования) счета"
		- Ссылка на страницу "Список подписанных счетов отправленных на утверждение финансовому директору"
	* [Отчет] Список счетов:
		- Фильтрация по дате, статусу, проекту, и пр. 
		- Переход на страницу просмотра счета по клику на номере счета
	- Подраздел "Список новых счетов, созданных менеджерами": ~/bills/new
		* [Отчет] Доступен только бухгалтеру. Список счетов:
			- Фильтрация по дате, проекту, и пр. 
			- Переход на страницу просмотра счета по клику на номере счета
			- Кнопка "Взять под управление" напротив каждого счета
	- Подраздел "Страница добавления счета": ~/bills/add
		* [Форма] Заполнение полей со свойствами счета. Например:
			- [Выпадающий список] Проект
			- [Выпадающий список] Контрагент
			- [Выпадающий список] Тип
			- [Поле] Сумма
	- Подраздел "Страница просмотра (и редактирования) счета": ~/bills/view/N (где N - id счета)
		* [Форма] Поля свойств счета. Возможности:
			- Просмотр и редактирование (доступно для бухгалтера, управляющего счетом; менеджеру, до того как бухгалтер возьмет счет под управление)
			- Просмотр (для менеджера и финансового директора)
	- Подраздел "Список подписанных счетов отправленных на утверждение финансовому директору": ~/bills/signed
		* [Отчет] Доступен для просмотра бухгалтеру и финансовому директору. Список счетов:
			- Фильтрация по дате, проекту, статусу
			- Переход на страницу просмотра счета по клику на номере счета
			- Финансовому директору выводится кнопка "Подтвердить" напротив каждого счета 

+ Раздел "Исполнители" ("Сотрудники") : ~/staff
	* [Меню] Ссылки на возможные действия. Например: 
		- Ссылка на страницу "Добавление нового исполнителя"
	* [Отчет] Список исполнителей:
		- Фильтрация по отделу, специализации, проекту, дате начала работы. 
		- Переход на страницу просмотра исполнителя ("личная карточка") по клику на имени исполнителя
	- Подраздел "Страница добавления исполнителя": ~/staff/add
		* [Форма] Заполнение полей "личная карточка" исполнителя. Например:
			- [Поле] Имя
			- [Поле] Фамилия
			- [Выпадающий список] Специализация (программист, верстальщик, дизайнер, тестер, ...)
	- Подраздел "Страница просмотра (и редактирования) исполнителя": ~/staff/view/N (где N - id исполнителя)
		* [Форма] Заполнение полей "личная карточка" исполнителя. Например:
			- [Поле] Имя
			- [Поле] Фамилия
			- [Выпадающий список] Специализация (программист, верстальщик, дизайнер, тестер, ...)
			Так же может выводиться список проектов, на которых задействован данный исполнитель. 



## Схема данных (черновик - доработать)

#### Таблица: "Счета"

- Добавить поле 'added_by'
- Добавить поле 'is_payed'


